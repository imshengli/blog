---
title: JS å­—ç¬¦ä¸²
date: 2018-01-15 19:04:10
categories: JavaScript
tags:
  - js
---

## æ€»ç»“

JavaScript çš„å­—ç¬¦ä»¥ `UTF-16` æ ¼å¼å­˜å‚¨ï¼Œ
æ¯ä¸ªå­—ç¬¦å ä¸¤ä¸ªå­—èŠ‚ï¼›
ä½†å¯¹äºå¤§ç«¯å­—ç¬¦ï¼Œæ¯ä¸ªå­—ç¬¦é•¿åº¦ä¸º2ï¼Œå å››ä¸ªå­—èŠ‚ï¼›
`\`æ˜¯ JavaScript ä¸­çš„ç‰¹æ®Šå¤„ç†ï¼Œæ³¨æ„ç‰¹æ®Šå¤„ç†ï¼›
å­—ç¬¦æ•°ç»„é•¿åº¦å’Œå•ä¸ªå­—ç¬¦æ— æ³•æ›´æ”¹ï¼›

## ç®€ä»‹

å¦‚æœé•¿å­—ç¬¦ä¸²å¿…é¡»åˆ†æˆå¤šè¡Œï¼Œå¯ä»¥åœ¨æ¯ä¸€è¡Œçš„å°¾éƒ¨ä½¿ç”¨åæ–œæ ã€‚

```js
// åæ–œæ çš„åé¢å¿…é¡»æ˜¯æ¢è¡Œç¬¦ï¼Œè€Œä¸èƒ½æœ‰å…¶ä»–å­—ç¬¦ï¼ˆæ¯”å¦‚ç©ºæ ¼ï¼‰
var longString = 'Long \
long \
long \
string';
longString
// "Long long long string"
```

## è½¬ä¹‰

åæ–œæ ï¼ˆ\ï¼‰åœ¨å­—ç¬¦ä¸²å†…æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œ
ç”¨æ¥è¡¨ç¤ºä¸€äº›ç‰¹æ®Šå­—ç¬¦ï¼Œæ‰€ä»¥åˆç§°ä¸ºè½¬ä¹‰ç¬¦ã€‚

> \0 ï¼šnullï¼ˆ\u0000ï¼‰
> \b ï¼šåé€€é”®ï¼ˆ\u0008ï¼‰
> \f ï¼šæ¢é¡µç¬¦ï¼ˆ\u000Cï¼‰
> \n ï¼šæ¢è¡Œç¬¦ï¼ˆ\u000Aï¼‰
> \r ï¼šå›è½¦é”®ï¼ˆ\u000Dï¼‰
> \t ï¼šåˆ¶è¡¨ç¬¦ï¼ˆ\u0009ï¼‰
> \v ï¼šå‚ç›´åˆ¶è¡¨ç¬¦ï¼ˆ\u000Bï¼‰
> \' ï¼šå•å¼•å·ï¼ˆ\u0027ï¼‰
> \" ï¼šåŒå¼•å·ï¼ˆ\u0022ï¼‰
> \\ ï¼šåæ–œæ ï¼ˆ\u005Cï¼‰

å¦‚æœåœ¨éç‰¹æ®Šå­—ç¬¦å‰é¢ä½¿ç”¨åæ–œæ ï¼Œåˆ™åæ–œæ ä¼šè¢«çœç•¥ã€‚

```js
'\a'; // "a"
```

ç‰¹æ®Šç”¨æ³•ï¼š

1ï¼‰`\HHH`ï¼šç´§è·Ÿä¸‰ä¸ªå…«è¿›åˆ¶æ•°ï¼ˆ000åˆ°377ï¼‰ï¼Œä»£è¡¨ä¸€ä¸ªå­—ç¬¦ã€‚

HHHå¯¹åº”è¯¥å­—ç¬¦çš„ Unicode ç ç‚¹ï¼Œæ¯”å¦‚`\251`è¡¨ç¤ºç‰ˆæƒç¬¦å·ã€‚
æ˜¾ç„¶ï¼Œè¿™ç§æ–¹æ³•åªèƒ½è¾“å‡º256ç§å­—ç¬¦ã€‚

2ï¼‰`\xHH`ï¼šç´§è·Ÿä¸¤ä¸ªåå…­è¿›åˆ¶æ•°ï¼ˆ00åˆ°FFï¼‰ï¼Œä»£è¡¨ä¸€ä¸ªå­—ç¬¦ã€‚

HHå¯¹åº”è¯¥å­—ç¬¦çš„ Unicode ç ç‚¹ï¼Œæ¯”å¦‚`\xA9`è¡¨ç¤ºç‰ˆæƒç¬¦å·ã€‚
è¿™ç§æ–¹æ³•ä¹Ÿåªèƒ½è¾“å‡º256ç§å­—ç¬¦ã€‚

3ï¼‰`\uXXXX`ï¼šç´§è·Ÿå››ä¸ªåå…­è¿›åˆ¶æ•°ï¼ˆ0000åˆ°FFFFï¼‰ï¼Œä»£è¡¨ä¸€ä¸ªå­—ç¬¦ã€‚

HHHHå¯¹åº”è¯¥å­—ç¬¦çš„ Unicode ç ç‚¹ï¼Œæ¯”å¦‚`\u00A9`è¡¨ç¤ºç‰ˆæƒç¬¦å·ã€‚

## å­—ç¬¦ä¸²ä¸æ•°ç»„

**æ— æ³•æ”¹å˜å­—ç¬¦ä¸²ä¹‹ä¸­çš„å•ä¸ªå­—ç¬¦ã€‚**
**å­—ç¬¦ä¸² length å±æ€§ä¹Ÿæ˜¯æ— æ³•æ”¹å˜çš„**

```js
var s = 'hello';
delete s[0];
s // "hello"
s[1] = 'a';
s // "hello"
s[5] = '!';
s // "hello"
```

## å­—ç¬¦é›†

JavaScript ä½¿ç”¨ `Unicode` å­—ç¬¦é›†ã€‚
JavaScript å¼•æ“å†…éƒ¨ï¼Œæ‰€æœ‰å­—ç¬¦éƒ½ç”¨ `Unicode` è¡¨ç¤ºã€‚

JavaScript å…è®¸ç›´æ¥åœ¨ç¨‹åºä¸­ä½¿ç”¨ Unicode ç ç‚¹è¡¨ç¤ºå­—ç¬¦ï¼Œ
å³å°†å­—ç¬¦å†™æˆ`\uxxxx`çš„å½¢å¼ï¼Œå…¶ä¸­`xxxx`ä»£è¡¨è¯¥å­—ç¬¦çš„ Unicode ç ç‚¹ã€‚
æ¯”å¦‚ï¼Œ`\u00A9`ä»£è¡¨ç‰ˆæƒç¬¦å·ã€‚

```js
var f\u006F\u006F = 'abc';
foo // "abc"
```

> UTF-16 æ˜¯ Unicode çš„å®ç°ï¼›
> æ¯ä¸ªå­—ç¬¦åœ¨ JavaScript å†…éƒ¨éƒ½æ˜¯ä»¥16ä½ï¼ˆå³2ä¸ªå­—èŠ‚ï¼‰çš„ UTF-16 æ ¼å¼å‚¨å­˜ã€‚
> ä¹Ÿå°±æ˜¯è¯´ï¼ŒJavaScript çš„å•ä½å­—ç¬¦é•¿åº¦å›ºå®šä¸º16ä½é•¿åº¦ï¼Œå³2ä¸ªå­—èŠ‚ã€‚
> ä½†æ˜¯ï¼ŒUTF-16 æœ‰ä¸¤ç§é•¿åº¦ï¼š
> å¯¹äºç ç‚¹åœ¨U+0000åˆ°U+FFFFä¹‹é—´çš„å­—ç¬¦ï¼Œé•¿åº¦ä¸º16ä½ï¼ˆå³2ä¸ªå­—èŠ‚ï¼‰ï¼›
> å¯¹äºç ç‚¹åœ¨U+10000åˆ°U+10FFFFä¹‹é—´çš„å­—ç¬¦ï¼Œé•¿åº¦ä¸º32ä½ï¼ˆå³4ä¸ªå­—èŠ‚ï¼‰ï¼Œ
> è€Œä¸”å‰ä¸¤ä¸ªå­—èŠ‚åœ¨0xD800åˆ°0xDBFFä¹‹é—´ï¼Œåä¸¤ä¸ªå­—èŠ‚åœ¨0xDC00åˆ°0xDFFFä¹‹é—´ã€‚
> ä¸¾ä¾‹æ¥è¯´ï¼Œç ç‚¹`U+1D306`å¯¹åº”çš„å­—ç¬¦ä¸º`ğŒ†`ï¼Œå®ƒå†™æˆ UTF-16 å°±æ˜¯`0xD834 0xDF06`ã€‚

JavaScript å¯¹ UTF-16 çš„æ”¯æŒæ˜¯ä¸å®Œæ•´çš„ï¼Œ
ç”±äºå†å²åŸå› ï¼Œåªæ”¯æŒä¸¤å­—èŠ‚çš„å­—ç¬¦ï¼Œä¸æ”¯æŒå››å­—èŠ‚çš„å­—ç¬¦ã€‚
è¿™æ˜¯å› ä¸º JavaScript ç¬¬ä¸€ç‰ˆå‘å¸ƒçš„æ—¶å€™ï¼Œ
Unicode çš„ç ç‚¹åªç¼–åˆ°`U+FFFF`ï¼Œå› æ­¤ä¸¤å­—èŠ‚è¶³å¤Ÿè¡¨ç¤ºäº†ã€‚
åæ¥ï¼ŒUnicode çº³å…¥çš„å­—ç¬¦è¶Šæ¥è¶Šå¤šï¼Œå‡ºç°äº†å››å­—èŠ‚çš„ç¼–ç ã€‚
ä½†æ˜¯ï¼ŒJavaScript çš„æ ‡å‡†æ­¤æ—¶å·²ç»å®šå‹äº†ï¼Œ
ç»Ÿä¸€å°†å­—ç¬¦é•¿åº¦é™åˆ¶åœ¨ä¸¤å­—èŠ‚ï¼Œå¯¼è‡´æ— æ³•è¯†åˆ«å››å­—èŠ‚çš„å­—ç¬¦ã€‚
å››å­—èŠ‚å­—ç¬¦`ğŒ†`ï¼Œæµè§ˆå™¨ä¼šæ­£ç¡®è¯†åˆ«è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œ
ä½†æ˜¯ JavaScript æ— æ³•è¯†åˆ«ï¼Œä¼šè®¤ä¸ºè¿™æ˜¯ä¸¤ä¸ªå­—ç¬¦ã€‚

## Base64 ç¼–ç 

æœ‰æ—¶ï¼Œæ–‡æœ¬é‡Œé¢åŒ…å«ä¸€äº›ä¸å¯æ‰“å°çš„ç¬¦å·ï¼Œ
æ¯”å¦‚ ASCII ç 0åˆ°31çš„ç¬¦å·éƒ½æ— æ³•æ‰“å°å‡ºæ¥ï¼Œ
è¿™æ—¶å¯ä»¥ä½¿ç”¨ Base64 ç¼–ç ï¼Œå°†å®ƒä»¬è½¬æˆå¯ä»¥æ‰“å°çš„å­—ç¬¦ã€‚
å¦ä¸€ä¸ªåœºæ™¯æ˜¯ï¼Œæœ‰æ—¶éœ€è¦ä»¥æ–‡æœ¬æ ¼å¼ä¼ é€’äºŒè¿›åˆ¶æ•°æ®ï¼Œ
é‚£ä¹ˆä¹Ÿå¯ä»¥ä½¿ç”¨ Base64 ç¼–ç ã€‚

> æ‰€è°“ Base64 å°±æ˜¯ä¸€ç§ç¼–ç æ–¹æ³•ï¼Œ
> å¯ä»¥å°†ä»»æ„å€¼è½¬æˆ 0ï½9ã€Aï½Zã€a-zã€+å’Œ/è¿™64ä¸ªå­—ç¬¦ç»„æˆçš„å¯æ‰“å°å­—ç¬¦ã€‚
> ä½¿ç”¨å®ƒçš„ä¸»è¦ç›®çš„ï¼Œä¸æ˜¯ä¸ºäº†åŠ å¯†ï¼Œ
> è€Œæ˜¯ä¸ºäº†ä¸å‡ºç°ç‰¹æ®Šå­—ç¬¦ï¼Œç®€åŒ–ç¨‹åºçš„å¤„ç†ã€‚

> `btoa()`ï¼šä»»æ„å€¼è½¬ä¸º Base64 ç¼–ç 
> `atob()`ï¼šBase64 ç¼–ç è½¬ä¸ºåŸæ¥çš„å€¼

```js
var string = 'Hello World!';
btoa(string) // "SGVsbG8gV29ybGQh"
atob('SGVsbG8gV29ybGQh') // "Hello World!"

// æ³¨æ„ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ä¸é€‚åˆé ASCII ç çš„å­—ç¬¦ï¼Œä¼šæŠ¥é”™ã€‚
btoa('ä½ å¥½') // æŠ¥é”™
// è¦å°†é ASCII ç å­—ç¬¦è½¬ä¸º Base64 ç¼–ç ï¼Œ
// å¿…é¡»ä¸­é—´æ’å…¥ä¸€ä¸ªè½¬ç ç¯èŠ‚ï¼Œå†ä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚
function b64Encode(str) {
  return btoa(encodeURIComponent(str));
}
function b64Decode(str) {
  return decodeURIComponent(atob(str));
}
b64Encode('ä½ å¥½') // "JUU0JUJEJUEwJUU1JUE1JUJE"
b64Decode('JUU0JUJEJUEwJUU1JUE1JUJE') // "ä½ å¥½"
```

## å‚è€ƒé“¾æ¥

- [é˜®ä¸€å³°ï¼Œå­—ç¬¦ä¸²](http://javascript.ruanyifeng.com/grammar/string.html)
- [JavaScript: è¯¦è§£Base64ç¼–ç å’Œè§£ç ](https://my.oschina.net/goal/blog/201032)
